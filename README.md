# Crypto News Scraper and Telegram Bot

This project scrapes cryptocurrency-related news articles and sends them to a Telegram channel. It uses MongoDB to store the news articles and ensures no duplicates are inserted. The project fetches news from CryptoNews and CoinDesk based on topics, checks for new articles, and sends them to a Telegram channel using a bot.

## Features
- Scrapes news related to cryptocurrencies like Bitcoin, Ethereum, and Altcoins.
- Fetches news articles from CryptoNews and CoinDesk.
- Avoids inserting duplicate news in MongoDB.
- Sends the latest news to a Telegram channel using a bot.
- Allows easy configuration through environment variables.

## Prerequisites
Before running the project, make sure you have the following:
- Python 3.x installed
- MongoDB Atlas account for cloud-based MongoDB (or local MongoDB setup)
- Telegram bot created and token generated via BotFather
- Required Python packages installed

## Installation Instructions

### 1. Clone the Repository

First, clone the repository to your local machine or server:

```bash
git clone https://github.com/your-username/crypto-news-scraper.git
cd crypto-news-scraper
```

### 2. Set Up Virtual Environment (Optional but Recommended)

Create a virtual environment to manage dependencies:

```bash
python3 -m venv venv
source venv/bin/activate   # For Windows use: venv\Scripts\activate
```

### 3. Install Dependencies

Install all required Python packages using `pip`:

```bash
pip install -r requirements.txt
```

### 4. Set Up Environment Variables

Create a `.env` file in the root of the project and add the following environment variables:

```plaintext
DB_PASSWORD=your_mongodb_password
BOT_API_TOKEN=your_telegram_bot_api_token
CHANNEL_ID=your_telegram_channel_id
```

- **DB_PASSWORD**: The password for your MongoDB Atlas database.
- **BOT_API_TOKEN**: The API token generated by BotFather for your Telegram bot.
- **CHANNEL_ID**: The ID of the Telegram channel where news will be sent.

### 5. Running the Scraper

To start the scraper and fetch the latest news, run the following command:

```bash
python scraper.py
```

This will scrape the latest news based on the topics and insert the data into MongoDB.

### 6. Sending News to Telegram

Once the news articles are scraped, you can send them to the Telegram channel by running:

```bash
python telegram_connector.py
```

This script will check for unsent news in MongoDB and send them to your Telegram channel. It will also update the `sentToChannel` field in MongoDB once the news is sent.

### 7. Scheduling the Scraper (Optional)

You can schedule the scraper to run periodically using cron (Linux/macOS) or Task Scheduler (Windows). Here's an example for cron (runs every hour):

```bash
crontab -e
# Add the following line to run the scraper every hour
0 * * * * /path/to/python /path/to/scraper.py
```

### 8. Stopping the Scripts

If you need to stop the scraper or the Telegram connector, simply press `Ctrl+C` in the terminal.

---

## File Descriptions

- **db_connection.py**: Handles MongoDB connection setup, including reading environment variables and connecting to the database.
- **scraper.py**: The main script that scrapes cryptocurrency news from CryptoNews and CoinDesk and inserts it into MongoDB.
- **telegram_connector.py**: Sends unsent news to the Telegram channel and updates MongoDB once news is sent.

---

## Troubleshooting

- **SSL Handshake Error**: If you encounter an SSL handshake failure while connecting to MongoDB, ensure you are using the correct connection URI and that MongoDB Atlas is accessible from your current location. Consider troubleshooting network/firewall settings if necessary.
  
- **Bot Not Sending Messages**: Verify the `BOT_API_TOKEN` and `CHANNEL_ID` in the `.env` file. Ensure the bot is added to the Telegram channel with appropriate permissions to send messages.

- **MongoDB Connection Issues**: Check your MongoDB URI and ensure the MongoDB server is running. You can verify the connection through MongoDB Atlas or your local MongoDB instance.

---